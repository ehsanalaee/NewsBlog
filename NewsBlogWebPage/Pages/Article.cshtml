@page
@model NewsBlogWebPage.Pages.ArticleModel
@{
}



<div class="main-container container" id="main-container">

    <!-- Content -->
    <div class="row">

        @if(Model.article == null)
        {
            <p>Not found</p>
        }
        else
        {
            <!-- post content -->
            <div class="col-lg-8 blog__content mb-72">
                <div class="content-box">

                    <!-- standard post -->
                    <article class="entry mb-0">

                        <div class="single-post__entry-header entry__header">
                            <a asp-page="Category" asp-route-id="@Model.article.CategoryId" class="entry__meta-category entry__meta-category--label entry__meta-category--green">@Model.article.Category.Name</a>
                            <h1 class="single-post__entry-title">
                                @Model.article.Title
                            </h1>

                            <div class="entry__meta-holder">
                                <ul class="entry__meta">
                                    <li class="entry__meta-author">
                                        <span>نویسنده:</span>
                                        <a asp-page="Writer" asp-route-id="@Model.article.WriterId">@Model.article.Writer.Name</a>
                                    </li>
                                    <li class="entry__meta-date">
                                        @Model.article.DateCreated
                                    </li>
                                </ul>

                                <ul class="entry__meta">
                                    <li class="entry__meta-views">
                                        <i class="ui-eye"></i>
                                        <span>@Model.article.ViewCount</span>
                                    </li>
                                    <li class="entry__meta-comments">
                                        <span>
                                            <i class="ui-chat-empty"></i>@Model.article.Comments.Count()
                                        </span>
                                    </li>
                                </ul>
                            </div>
                        </div> <!-- end entry header -->

                        <div class="entry__img-holder">
                            <img src="img/@Model.article.ImageName" alt="" class="entry__img">
                        </div>

                        <div class="entry__article-wrap">

                            

                            <div class="entry__article">
                                @Html.Raw(Model.article.Text)

                                <!-- tags -->
                                <div class="entry__tags">
                                    <i class="ui-tags"></i>
                                    <span class="entry__tags-label">برچسب ها:</span>
                                    <a href="#" rel="tag">نمایشگاه MWC 2019</a>
                                    <a href="#" rel="tag">هوآوی</a>
                                </div> <!-- end tags -->

                            </div> <!-- end entry article -->
                        </div> <!-- end entry article wrap -->
                        <!-- Author -->
                        <div class="entry-author clearfix">
                            <div class="entry-author__info">
                                <h6 class="entry-author__name">
                                    <a asp-page="Writer" asp-route-id="@Model.article.WriterId">@Model.article.Writer.Name</a>
                                </h6>
                                <p class="mb-0">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است. چاپگرها و متون بلکه روزنامه و مجله در ستون و سطرآنچنان که لازم است و برای شرایط فعلی تکنولوژی مورد نیاز و کاربردهای متنوع با هدف بهبود ابزارهای کاربردی می باشد.</p>
                            </div>
                        </div>

                        <!-- Related Posts -->
                        <section class="section related-posts mt-40 mb-0">
                            <div class="title-wrap title-wrap--line">
                                <h3 class="section-title">مطالب مرتبط</h3>
                            </div>

                            <!-- Slider -->
                            <div id="owl-posts-3-items" class="owl-carousel owl-theme owl-carousel--arrows-outside">
                                @foreach(var article in Model.relatedArticles)
                                {
                                    <article class="entry thumb thumb--size-1">
                                    <div class="entry__img-holder thumb__img-holder" style="background-image: url('img/@article.ImageName');">
                                        <div class="bottom-gradient"></div>
                                        <div class="thumb-text-holder">
                                            <h2 class="thumb-entry-title">
                                                <a asp-page="Article" asp-route-id="@article.Id">@article.Title</a>
                                            </h2>
                                        </div>
                                        <a asp-page="Article" asp-route-id="@article.Id" class="thumb-url"></a>
                                    </div>
                                </article>
                                }
                            </div> <!-- end slider -->

                        </section> <!-- end related posts -->

                    </article> <!-- end standard post -->
                    <!-- Comments -->
                    <div class="entry-comments">
                        <div class="title-wrap title-wrap--line">
                            <h3 class="section-title">@Model.article.Comments.Count() دیدگاه</h3>
                        </div>
                        <ul class="comment-list">
                            @foreach (var comment in Model.article.Comments)
                            {
                                <li class="comment">
                                <div class="comment-body">
                                    <div class="comment-text">
                                        <h6 class="comment-author">@comment.User.DisplayName</h6>
                                        <div class="comment-metadata">
                                            <p class="comment-date">@comment.DateCreated</p>
                                        </div>
                                        <p>@comment.Text</p>
                                    </div>
                                </div>
                            </li>
                            }

                        </ul>
                    </div> <!-- end comments -->
                    <!-- Comment Form -->
                    <div id="respond" class="comment-respond">
                        <div class="title-wrap">
                            <h5 class="comment-respond__title section-title">دیدگاه شما</h5>
                        </div>
                        <form id="form" class="comment-form" method="post" action="#">
                            <p class="comment-form-comment">
                                <label for="comment">دیدگاه</label>
                                <textarea id="comment" name="comment" rows="5" required="required"></textarea>
                            </p>

                            <div class="row row-20">
                                <div class="col-lg-4">
                                    <label for="name">نام: *</label>
                                    <input name="name" id="name" type="text">
                                </div>
                                <div class="col-lg-4">
                                    <label for="comment">ایمیل: *</label>
                                    <input name="email" id="email" type="email">
                                </div>
                            </div>

                            <p class="comment-form-submit">
                                <input type="submit" class="btn btn-lg btn-color btn-button" value="ارسال دیدگاه" id="submit-message">
                            </p>

                        </form>
                    </div> <!-- end comment form -->

                </div> <!-- end content box -->
            </div>

            <!-- end post content -->
        }
        <!-- Sidebar -->
        <aside class="col-lg-4 sidebar sidebar--right">

            <!-- Widget Popular Posts -->
            <aside class="widget widget-popular-posts">
                <h4 class="widget-title">محبوب ترین مقالات</h4>
                <ul class="post-list-small">
                    
                    @if (Model.popularArticles != null && Model.popularArticles.Any())
{
    @foreach (var article in Model.popularArticles)
    {
        <li class="post-list-small__item">
            <article class="post-list-small__entry clearfix">
                <div class="post-list-small__img-holder">
                    <div class="thumb-container thumb-100">
                        <a href="single-post.html">
                            <img data-src="img/@article.ImageName" src="pages/img/empty.png" alt="" class="post-list-small__img--rounded lazyload">
                        </a>
                    </div>
                </div>
                <div class="post-list-small__body">
                    <h3 class="post-list-small__entry-title">
                        <a asp-page="Article" asp-route-id="@article.Id">@article.Title</a>
                    </h3>
                    <ul class="entry__meta">
                        <li class="entry__meta-author">
                            <span>نویسنده:</span>
                            <a asp-page="Writer" asp-route-id="@article.WriterId">@article.Writer?.Name</a>
                        </li>
                        <li class="entry__meta-date">
                            @article.DateCreated
                        </li>
                    </ul>
                </div>
            </article>
        </li>
    }
}
                </ul>
            </aside> <!-- end widget popular posts -->
        </aside>
    </div>
</div>